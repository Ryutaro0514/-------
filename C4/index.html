<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <canvas width="400" height="300"></canvas>
    <div class="all">
        <button class="btnr">ボタン赤</button>
        <button class="btnb">ボタン青</button>
        <button class="btng">ボタン緑</button>
    </div>
</body>

</html>

<script>
    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");
    const btnr = document.querySelector(".btnr");
    const btnb = document.querySelector(".btnb");
    const btng = document.querySelector(".btng");

    let endX = 0;
    let endY = 0;
    let startX = 0;
    let startY = 0;
    let isDragging = false;
    let currentColor = "black"; // デフォルトの色を黒に設定

    canvas.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX - canvas.offsetLeft;
        startY = e.clientY - canvas.offsetTop;
    });

    canvas.addEventListener("mouseup", () => {
        isDragging = false;
    });

    canvas.addEventListener("mousemove", (e) => {
        if (isDragging) {
            endX = e.clientX - canvas.offsetLeft;
            endY = e.clientY - canvas.offsetTop;
            ctx.strokeStyle = currentColor; // 現在の色を使用
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            startX = endX;
            startY = endY;
        }
    });

    btnr.addEventListener("click", () => {
        currentColor = "red"; // 現在の色を赤に変更
        console.log("red");
    });

    btnb.addEventListener("click", () => {
        currentColor = "blue"; // 現在の色を青に変更
        console.log("blue");
    });

    btng.addEventListener("click", () => {
        currentColor = "green"; // 現在の色を緑に変更
        console.log("green");
    });

    const draw = () => {
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, 400, 300);
    };

    draw();
</script>
